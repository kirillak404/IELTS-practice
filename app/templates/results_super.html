{% extends "layout.html" %}
{% block title %}
Result
{% endblock %}
{% block h1 %}
Speaking practice
{% endblock %}
{% block h2 %}
{% endblock %}
{% block content %}
<h3 class="mb-4">Your results</h3>
<div class="row">
   <!-- Fluency and Coherence -->
   <div class="col-lg-6 mb-4">
      <div class="card">
         <h5 class="card-header d-flex align-items-center">
            <div class="rating">{{ results.fluency_coherence_score }}</div>
            <div class="header-content header-content-scores">
               <span class="header-title">Fluency and Coherence</span>
               <span class="score-text"></span>
            </div>
         </h5>
         <div class="card-body">
            <p class="card-text">{{ results.fluency_coherence_json.feedback }}</p>
            <strong class="mt-4">Areas for Improvement:</strong>
            <hr/>
            <ul class="list-unstyled">
               <li class="mt-2"><i class="bi bi-x-circle-fill text-danger"></i> Instead of saying 'I goes to school', you should say 'I go to school'.</li>
               <li class="mt-2"><i class="bi bi-lightbulb-fill text-warning"></i> In place of 'I'm very tired', you could say 'I'm exhausted'.</li>
            </ul>
         </div>
      </div>
   </div>
   <!-- Lexical Resource -->
   <div class="col-lg-6 mb-4">
      <div class="card">
         <h5 class="card-header d-flex align-items-center">
            <div class="rating">{{ results.lexical_resource_score }}</div>
            <div class="header-content header-content-scores">
               <span class="header-title">Lexical Resource</span>
               <span class="score-text"></span>
            </div>
         </h5>
         <div class="card-body">
            <p class="card-text">{{ results.lexical_resource_json.feedback }}</p>
            <strong class="mt-4">Areas for Improvement:</strong>
            <hr/>
            <ul class="list-unstyled">
               <li class="mt-2"><i class="bi bi-x-circle-fill text-danger"></i> Instead of saying 'I goes to school', you should say 'I go to school'.</li>
               <li class="mt-2"><i class="bi bi-lightbulb-fill text-warning"></i> In place of 'I'm very tired', you could say 'I'm exhausted'.</li>
            </ul>
         </div>
      </div>
   </div>
   <!-- Grammatical range and accuracy -->
   <div class="col-lg-6 mb-4">
      <div class="card">
         <h5 class="card-header d-flex align-items-center">
            <div class="rating">{{ results.grammatical_range_accuracy_score }}</div>
            <div class="header-content header-content-scores">
               <span class="header-title">Grammatical range and accuracy</span>
               <span class="score-text"></span>
            </div>
         </h5>
         <div class="card-body">
            <p class="card-text">{{ results.grammatical_range_accuracy_json.feedback }}</p>
            <strong class="mt-4">Areas for Improvement:</strong>
            <hr/>
            <ul class="list-unstyled">
               <li class="mt-2"><i class="bi bi-x-circle-fill text-danger"></i> Instead of saying 'I goes to school', you should say 'I go to school'.</li>
               <li class="mt-2"><i class="bi bi-lightbulb-fill text-warning"></i> In place of 'I'm very tired', you could say 'I'm exhausted'.</li>
            </ul>
         </div>
      </div>
   </div>
   <!-- Pronunciation -->
   <div class="col-lg-6 mb-4">
      <div class="card">
         <h5 class="card-header d-flex align-items-center">
            <div class="rating">{{ results.pronunciation_score }}</div>
            <div class="header-content header-content-scores">
               <span class="header-title">Pronunciation</span>
               <span class="score-text"></span>
            </div>
         </h5>
         <div class="card-body">
            <p class="card-text">{{ results.pronunciation_json.feedback }}</p>
            <strong class="mt-4">Areas for Improvement:</strong>
            <hr/>
            <ul class="list-unstyled">
               <li class="mt-2"><i class="bi bi-x-circle-fill text-danger"></i> Instead of saying 'I goes to school', you should say 'I go to school'.</li>
               <li class="mt-2"><i class="bi bi-lightbulb-fill text-warning"></i> In place of 'I'm very tired', you could say 'I'm exhausted'.</li>
            </ul>
         </div>
      </div>
   </div>
</div>
<br>


<h3 class="mb-4">Advanced Pronunciation Analysis</h3>
<div class="row">
   <!-- Transcription Column (Wider) -->
   <div class="col-lg-8 mb-4">
      <div class="card">
         <h5 class="card-header d-flex align-items-center">
            <div class="header-content">
               <span class="header-title">Transcription</span>
            </div>
         </h5>
         <div class="card-body">
            {% for answer in answers %}
            <p class="card-text">{{ answer.question.text }}</p>
            <p class="card-text">{{ convert_answer_object_to_html(answer)|safe }}</p>
            <hr/>
            {% endfor %}
         </div>
      </div>
   </div>
   <!-- Scores Column (Narrower) -->
   <div class="col-lg-4 mb-4">
      <div class="card">
         <h5 class="card-header d-flex align-items-center">
            <div class="header-content">
               <span class="header-title">Pronunciation scores</span>
            </div>
         </h5>
         <div class="card-body">
            <h5 class="fw-normal" data-toggle="tooltip" data-placement="right" title="Accuracy Score Explanation">Accuracy</h5>
            <div class="progress">
               <div class="progress-bar bg-success" role="progressbar" style="width: {{ pron_scores.accuracy_score }}%;" aria-valuenow="{{ pron_scores.accuracy_score }}" aria-valuemin="0" aria-valuemax="100">{{ pron_scores.accuracy_score }}</div>
            </div>
            <h5 class="fw-normal mt-3" data-toggle="tooltip" data-placement="right" title="Fluency Score Explanation">Fluency</h5>
            <div class="progress">
               <div class="progress-bar bg-success" role="progressbar" style="width: {{ pron_scores.fluency_score }}%;" aria-valuenow="{{ pron_scores.fluency_score }}" aria-valuemin="0" aria-valuemax="100">{{ pron_scores.fluency_score }}</div>
            </div>
            <h5 class="fw-normal mt-3" data-toggle="tooltip" data-placement="right" title="Completeness Score Explanation">Completeness</h5>
            <div class="progress">
               <div class="progress-bar bg-success" role="progressbar" style="width: {{ pron_scores.completeness_score }}%;" aria-valuenow="{{ pron_scores.completeness_score }}" aria-valuemin="0" aria-valuemax="100">{{ pron_scores.completeness_score }}</div>
            </div>
            <h5 class="fw-normal mt-3" data-toggle="tooltip" data-placement="right" title="Pronunciation Score Explanation">Pronunciation</h5>
            <div class="progress">
               <div class="progress-bar bg-success" role="progressbar" style="width: {{ pron_scores.pronunciation_score }}%;" aria-valuenow="{{ pron_scores.pronunciation_score }}" aria-valuemin="0" aria-valuemax="100">{{ pron_scores.pronunciation_score }}</div>
            </div>
         </div>
      </div>
   </div>
</div>


<div class="toast">
    <div class="toast-header">
        <strong class="mr-auto"></strong> <!-- data-error-type will be inserted here -->
    </div>
    <div class="toast-body">
        <!-- Error explanation, wrong and corrected text will be inserted here -->
    </div>
</div>


<script src="{{ url_for('static', filename='scores.js') }}"></script>
{% endblock %}